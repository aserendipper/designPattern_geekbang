## 43 | 单例模式（下）：如何设计实现一个集群环境下的分布式单例模式？
### 一、如何理解单例模式中的唯一性？
1、单例类中对象唯一性的作用范围是进程内的，在进程间是不唯一的。  
2、实际上，对于Java语言来说，单例类对象的唯一性的作用范围并非进程，而是类加载器。  
3、深入理解JVM虚拟机：对于任意一个类，都需要由加载它的类加载器和这个类本身一同确立其在Java虚拟机中的唯一性，每一个类加载器，都拥有一个独立的类名称空间。

### 二、如何实现线程唯一的单例？
1、通过一个HashMap来存储对象，其中key是线程ID，value是对象。  
2、Java语言本身提供了ThreadLocal并发工具类，可以更加轻松地实现线程唯一单例。

### 三、如何实现集群环境下的单例？
1、需要把这个单例对象序列化并存储到外部共享存储区(比如文件)。  
2、进程在使用这个单例对象的时候，需要先从外部共享存储区中将它读取到内存，并反序列化程对象，使用后再存储回外部共享存储区。为了保证任何时刻在进程间都只有一份对象存在，一个进程在获取到对象之后，需要对对象加锁，避免其他进程再将其获取，同时使用后将对象从内存中删除并解锁。

### 四、如何实现一个多例模式？
1、“单例”指的是一个类只能创建一个对象。  
2、“多例”指的是一个类可以创建多个对象，但是个数是有限制的，可以通过map实现。  
