## 26 | 实战二（下）：如何实现一个支持各种统计规则的性能计数器？
### 一、小步快跑、逐步迭代
1、数据采集：负责打点采集原始数据，包括记录每次接口请求的响应时间和请求时间。  
2、存储：负责将采集的原始数据保存下来，以便之后做聚合统计。数据的存储方式有很多种，暂时支持Redis，并且采集与存储两个过程同步执行。   
3、聚合统计：负责将原始数据聚合为统计数据，包括响应时间的最大值、最小值、平均值、99.9百分位值、99百分位值，以及接口请求的次数和tps。  
4、显示：负责将统计数据以某种格式显示到终端，暂时只支持主动推送命令行和邮件。

### 二、面向对象设计与实现
1、划分职责进而识别出有哪些类。  
2、定义类及类与类之间的关系。  
3、将类组装起来并提供执行入口。

### 三、Review设计与实现
1、在设计类时，需要不断使用之前的设计原则来审视设计是否合理。比如是否满足单一职责原则、开闭原则、依赖注入、KISS原则、DRY原则、迪米特法则，是否符合基于接口而非实现编程思想，代码是否高内聚、低耦合，是否可以抽象出可复用代码等等。  
2、优秀的代码都是重构出来的，复杂的代码也是慢慢堆彻出来的。  
