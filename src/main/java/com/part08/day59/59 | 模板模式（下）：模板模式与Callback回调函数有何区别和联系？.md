## 59 | 模板模式（下）：模板模式与Callback回调函数有何区别和联系？
### 一、回调的原理解析
1、回调是一种双向调用关系，A调用B，B反过来调用A，这种调用机制就叫作“回调”。  
2、回调跟模板模式一样，也具有复用和扩展的功能，回调不仅可以应用在代码设计上，在更高层次的架构设计(通过三方支付系统实现支付功能)上也比较常用。  
3、回调可以分为同步回调和异步回调(或者延迟回调)，同步回调指在函数返回之前执行回调函数，异步回调指的是在函数返回之后执行回调函数。

### 二、模板模式 VS 回调
1、从应用场景上看：同步回调跟模板模式几乎一致。它们都是在一个大的算法骨架中，自由替换其中的某个步骤，起到代码复用和扩展的目的。而异步回调跟模板模式有较大差别，更像是观察者模式。  
2、从代码实现上看：回调和模板模式完全不同。回调基于组合关系来实现，把一个对象传递给另一个对象，是一种对象之间的关系。模板模式基于继承关系来实现，子类重写父类的抽象方法，是一种类之间的关系。  
3、回调相对于模板模式会更加灵活，主要体现在：  
(1)基于模板模式编写的子类，已经继承了一个父类，不再具有继承的能力。  
(2)回调可以使用匿名函数来创建回调对象，可以不用事先定义类，而模板模式针对不同的实现都要定义不同的子类。  
(3)如果某个类中定义了多个模板方法，每个方法都有对应的抽象方法，当只用到其中一个模板方法，子类也必须实现所有的抽象方法。而回调只需要往用到的模板方法中注入回调对象即可。  
 